<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <h1>Login</h1>
  <span>user</span>
  <!-- <form method="post" action="/api/login">
    <fieldset>
      <input type="text" value="" id="usuario" name="usuario" >
      <input type="submit" value="Iniciar SesiÃ³n">
    </fieldset>
  </form> -->
  <input type="text" value="stsemaci" id="usuario" name="usuario" >
  <button id="entrar" onClick="entrar()" >entrar</button>
  <script>
    function entrar() {
      var input = document.getElementById('usuario')
      var usuario = input.value
      var payload = {
        usuario: usuario,
      }
      fetch('/api/login', {
        credentials: 'include',
        headers: {
          'Accept': 'application/json, text/plain, */*',
          'Content-Type': 'application/json'
        },
        method: "POST",
        body: JSON.stringify(payload)
        })
        .then(function(response) {
          return response.json()
        })
        .then(function(json) {
          if (json.datos.privilegios === 'estudiante') {
           window.location.href  = '/estudiantes'
          } else if (json.datos.privilegios === 'profesor') {
            window.location.href  = '/profesores'
          }
        });
    }
  </script>
</body>
</html>

